(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3006],{487:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/tutorial/advanced/current-change",function(){return r(7257)}])},6576:function(e,n,r){"use strict";var s=r(2322),t=r(5632),a=r(7243),i=r.n(a);let o={logo:(0,s.jsxs)("h1",{children:[(0,s.jsx)("span",{children:"trrack"})," - A library for"," ",(0,s.jsx)("span",{className:i()["highlight-logo"],children:"r"}),"eproducible ",(0,s.jsx)("span",{className:i()["highlight-logo"],children:"track"}),"ing"]}),project:{link:"https://github.com/Trrack/trrackjs"},docsRepositoryBase:"https://github.com/Trrack/trrackjs/tree/main/apps/docs",head:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,s.jsx)("meta",{property:"og:description",content:"The provenance tracking library for web."})]}),useNextSeoProps(){let{route:e}=(0,t.useRouter)();if("/"!==e&&"/docs"!==e)return{titleTemplate:"%s - Trrack"}},chat:{link:"https://github.com/kirangadhave/",icon:"Get in touch"},banner:{key:"2.0-release",text:(0,s.jsxs)("a",{href:"http://vdl.sci.utah.edu/trrack/",target:"_blank",rel:"noreferrer",children:["\uD83C\uDF89 This is documentation for ",(0,s.jsx)("strong",{children:"Trrack 2.0"}),"."," ",(0,s.jsx)("strong",{children:"Click here"})," for legacy Trrack documentation â†’"]})},footer:{text:(0,s.jsxs)("span",{children:["BSD 3 ",new Date().getFullYear()," \xa9"," ",(0,s.jsx)("a",{href:"https://github.com/Trrack",target:"_blank",rel:"noreferrer",children:"The Trrack Team"}),"."]})}};n.Z=o},7257:function(e,n,r){"use strict";r.r(n),r.d(n,{__toc:function(){return c}});var s=r(2322),t=r(8287),a=r(8336),i=r(6576);r(6716);var o=r(1199);let c=[{depth:3,value:"Basic usage",id:"basic-usage"},{depth:3,value:"Cleaning up",id:"cleaning-up"},{depth:3,value:"Advanced usage with state management libraries",id:"advanced-usage-with-state-management-libraries"}];function l(e){let n=Object.assign({h1:"h1",h3:"h3",p:"p",code:"code",pre:"pre",span:"span",ul:"ul",li:"li"},(0,o.a)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Current Change Event"}),"\n",(0,s.jsx)(n.h3,{id:"basic-usage",children:"Basic usage"}),"\n",(0,s.jsxs)(n.p,{children:["By default Trrack keeps a pointer the latest added node. This can be accessed using ",(0,s.jsx)(n.code,{children:"trrack.current"}),". Using ",(0,s.jsx)(n.code,{children:"undo"}),", ",(0,s.jsx)(n.code,{children:"redo"}),", and ",(0,s.jsx)(n.code,{children:"todo"})," will update this pointer to the appropriate node. Trrack emits a ",(0,s.jsx)(n.code,{children:"currentChange"})," event whenever current node changes due to any reason."]}),"\n",(0,s.jsxs)(n.p,{children:["To respond to the ",(0,s.jsx)(n.code,{children:"currentChange"})," event you can register a listener. The ",(0,s.jsx)(n.code,{children:"currentChange"})," listener gets an optional argument which is the ",(0,s.jsx)(n.code,{children:"trigger"})," for the current change."]}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" { initializeTrrack } "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@trrack/core'"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"initializeTrrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"({ "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" });"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".currentChange"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(() "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Do something..."})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,s.jsx)(n.h3,{id:"cleaning-up",children:"Cleaning up"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"currentChange"})," function returns an unsubscribe function which can be used to remove the listener to avoid memory leaks."]}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" { initializeTrrack } "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@trrack/core'"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"initializeTrrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"({ "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" });"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"unsubscribe"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".currentChange"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(() "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Do something..."})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Call unsubscribe to remove the listener"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"unsubscribe"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})]})}),"\n",(0,s.jsx)(n.h3,{id:"advanced-usage-with-state-management-libraries",children:"Advanced usage with state management libraries"}),"\n",(0,s.jsxs)(n.p,{children:["Current change event is the primary way to interact with the store from a state management library like ",(0,s.jsx)(n.code,{children:"redux"})," or ",(0,s.jsx)(n.code,{children:"pinia"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"currentChange"})," event is used to sync the state of the store with current state from Trrack.\nA general workflow for such integration looks like following:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Initialize store"}),"\n",(0,s.jsx)(n.li,{children:"Initialize trrack with initialState (possibly from store)"}),"\n",(0,s.jsx)(n.li,{children:"Setup store update actions to also inform Trrack about the udpates"}),"\n",(0,s.jsxs)(n.li,{children:["Register ",(0,s.jsx)(n.code,{children:"currentChange"})," listener to update the store state with the current state from Trrack in case of ",(0,s.jsx)(n.code,{children:"traversal"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Let's assume we have a provenance graph which looks as follows:"}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"A"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"B"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"C"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"<--"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Current"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})})]})}),"\n",(0,s.jsxs)(n.p,{children:["The state of the store is the same as ",(0,s.jsx)(n.code,{children:"State 3"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["If we execute ",(0,s.jsx)(n.code,{children:"trrack.undo()"})," at this point, the graph will be updated:"]}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"A"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"B"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"<--"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Current"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"C"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})})]})}),"\n",(0,s.jsxs)(n.p,{children:["However, our store state is still ",(0,s.jsx)(n.code,{children:"State 3"}),". Inside the ",(0,s.jsx)(n.code,{children:"currentChange"})," listener we can update the store state with the current state from Trrack."]}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".currentChange"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(() "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"newState"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".getState"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// gets the state from current node"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"store"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".update"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(newState); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// update the store state"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,s.jsxs)(n.p,{children:["This works great when we are traversing the graph. However, if we execute ",(0,s.jsx)(n.code,{children:"trrack.apply()"})," when ",(0,s.jsx)(n.code,{children:"current"})," is pointing to ",(0,s.jsx)(n.code,{children:"State 3"})," the store updates to ",(0,s.jsx)(n.code,{children:"State 4"}),". Our state update actions also inform trrack about the new state, and the graph will be updated:"]}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"A"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"B"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"C"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"D"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (State "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"<--"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Current"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"})})]})}),"\n",(0,s.jsxs)(n.p,{children:["Since a new node was added to Trrack and current pointer changed to point to it, the ",(0,s.jsx)(n.code,{children:"currentChange"})," event is triggered, which updates the store, and may cause re-rendering."]}),"\n",(0,s.jsxs)(n.p,{children:["Trrack passes ",(0,s.jsx)(n.code,{children:"trigger"})," argument to the ",(0,s.jsx)(n.code,{children:"currentChange"})," listener. If ",(0,s.jsx)(n.code,{children:"trigger"})," is ",(0,s.jsx)(n.code,{children:"new"})," we can skip the store update. The value for ",(0,s.jsx)(n.code,{children:"trigger"})," can be ",(0,s.jsx)(n.code,{children:"traversal"})," or ",(0,s.jsx)(n.code,{children:"new"}),". ",(0,s.jsx)(n.code,{children:"traversal"})," means that the current node was changed due to a ",(0,s.jsx)(n.code,{children:"undo"}),", ",(0,s.jsx)(n.code,{children:"redo"}),", or ",(0,s.jsx)(n.code,{children:"to"})," command. ",(0,s.jsx)(n.code,{children:"new"})," means that the current node was changed due to a ",(0,s.jsx)(n.code,{children:"apply"})," command. This way we can avoid updating the store state when the current node is changed due to addition of new node."]}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".currentChange"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"((trigger"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Trigger"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (trigger "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"==="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'new'"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"; "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// skip store update"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"newState"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".getState"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// gets the state from current node"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"store"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".update"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(newState); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// update the store state"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,s.jsxs)(n.p,{children:["Such a use case can be found very frequently when two state containers update each other. To handle such case, the ",(0,s.jsx)(n.code,{children:"currentChange"})," function accepts a second optional boolean argument which is ",(0,s.jsx)(n.code,{children:"skipOnNew"}),".\nPassing ",(0,s.jsx)(n.code,{children:"true"})," to ",(0,s.jsx)(n.code,{children:"skipOnNew"})," will skip the store update when the current node is changed due to addition of new node."]}),"\n",(0,s.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,s.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".currentChange"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"((trigger"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Trigger"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"/** do not need this anymore */"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// if (trigger === 'new') return;"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:" "}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"newState"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"trrack"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".getState"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// gets the state from current node"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"store"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:".update"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(newState); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// update the store state"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"); "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// skip store update when current node is changed due to addition of new node"})]})]})})]})}let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.a)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)},pageOpts:{filePath:"pages/docs/tutorial/advanced/current-change.mdx",route:"/docs/tutorial/advanced/current-change",timestamp:1678076833e3,pageMap:[{kind:"Meta",data:{index:{title:"Trrack",type:"page",display:"hidden",theme:{layout:"full"}},docs:{title:"Documentation",type:"page"},showcase:{title:"Showcase",type:"page",theme:{typesetting:"article",layout:"full"}},"api-reference":{title:"API Reference",type:"page"},about:{title:"About",type:"page",theme:{typesetting:"article"}}}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"api-reference",route:"/api-reference",children:[{kind:"Meta",data:{index:{title:"Overview",display:"hidden"},classes:"Classes",enums:"Enumerations",functions:"Functions",interfaces:"Interfaces",types:"Type Aliases"}},{kind:"Folder",name:"classes",route:"/api-reference/classes",children:[{kind:"MdxPage",name:"ID",route:"/api-reference/classes/ID"},{kind:"MdxPage",name:"Registry",route:"/api-reference/classes/Registry"},{kind:"Meta",data:{ID:"ID",Registry:"Registry"}}]},{kind:"Folder",name:"enums",route:"/api-reference/enums",children:[{kind:"MdxPage",name:"TrrackEvents",route:"/api-reference/enums/TrrackEvents"},{kind:"Meta",data:{TrrackEvents:"TrrackEvents"}}]},{kind:"Folder",name:"functions",route:"/api-reference/functions",children:[{kind:"Meta",data:{createAction:"createAction",createRootNode:"createRootNode",createStateNode:"createStateNode",initEventManager:"initEventManager",initializeProvenanceGraph:"initializeProvenanceGraph",initializeTrrack:"initializeTrrack",isRootNode:"isRootNode",isStateNode:"isStateNode"}},{kind:"MdxPage",name:"createAction",route:"/api-reference/functions/createAction"},{kind:"MdxPage",name:"createRootNode",route:"/api-reference/functions/createRootNode"},{kind:"MdxPage",name:"createStateNode",route:"/api-reference/functions/createStateNode"},{kind:"MdxPage",name:"initEventManager",route:"/api-reference/functions/initEventManager"},{kind:"MdxPage",name:"initializeProvenanceGraph",route:"/api-reference/functions/initializeProvenanceGraph"},{kind:"MdxPage",name:"initializeTrrack",route:"/api-reference/functions/initializeTrrack"},{kind:"MdxPage",name:"isRootNode",route:"/api-reference/functions/isRootNode"},{kind:"MdxPage",name:"isStateNode",route:"/api-reference/functions/isStateNode"}]},{kind:"MdxPage",name:"index",route:"/api-reference"},{kind:"Folder",name:"interfaces",route:"/api-reference/interfaces",children:[{kind:"MdxPage",name:"Trrack",route:"/api-reference/interfaces/Trrack"},{kind:"Meta",data:{Trrack:"Trrack"}}]},{kind:"Folder",name:"types",route:"/api-reference/types",children:[{kind:"MdxPage",name:"Artifact",route:"/api-reference/types/Artifact"},{kind:"MdxPage",name:"ArtifactId",route:"/api-reference/types/ArtifactId"},{kind:"MdxPage",name:"ConfigureTrrackOptions",route:"/api-reference/types/ConfigureTrrackOptions"},{kind:"MdxPage",name:"CurrentChangeHandler",route:"/api-reference/types/CurrentChangeHandler"},{kind:"MdxPage",name:"CurrentChangeHandlerConfig",route:"/api-reference/types/CurrentChangeHandlerConfig"},{kind:"MdxPage",name:"FlavoredId",route:"/api-reference/types/FlavoredId"},{kind:"MdxPage",name:"Label",route:"/api-reference/types/Label"},{kind:"MdxPage",name:"LabelGenerator",route:"/api-reference/types/LabelGenerator"},{kind:"MdxPage",name:"Metadata",route:"/api-reference/types/Metadata"},{kind:"MdxPage",name:"MetadataId",route:"/api-reference/types/MetadataId"},{kind:"MdxPage",name:"NodeArtifact",route:"/api-reference/types/NodeArtifact"},{kind:"MdxPage",name:"NodeId",route:"/api-reference/types/NodeId"},{kind:"MdxPage",name:"Nodes",route:"/api-reference/types/Nodes"},{kind:"MdxPage",name:"ProduceWrappedStateChangeFunction",route:"/api-reference/types/ProduceWrappedStateChangeFunction"},{kind:"MdxPage",name:"ProvenanceGraphStore",route:"/api-reference/types/ProvenanceGraphStore"},{kind:"MdxPage",name:"ProvenanceNode",route:"/api-reference/types/ProvenanceNode"},{kind:"MdxPage",name:"RecordActionArgs",route:"/api-reference/types/RecordActionArgs"},{kind:"MdxPage",name:"RootNode",route:"/api-reference/types/RootNode"},{kind:"MdxPage",name:"SideEffects",route:"/api-reference/types/SideEffects"},{kind:"MdxPage",name:"StateChangeFunction",route:"/api-reference/types/StateChangeFunction"},{kind:"MdxPage",name:"StateLike",route:"/api-reference/types/StateLike"},{kind:"MdxPage",name:"StateNode",route:"/api-reference/types/StateNode"},{kind:"MdxPage",name:"Trigger",route:"/api-reference/types/Trigger"},{kind:"MdxPage",name:"TrrackActionConfig",route:"/api-reference/types/TrrackActionConfig"},{kind:"MdxPage",name:"TrrackActionFunction",route:"/api-reference/types/TrrackActionFunction"},{kind:"MdxPage",name:"TrrackActionRecord",route:"/api-reference/types/TrrackActionRecord"},{kind:"MdxPage",name:"UnsubscribeCurrentChangeListener",route:"/api-reference/types/UnsubscribeCurrentChangeListener"},{kind:"Meta",data:{Artifact:"Artifact",ArtifactId:"ArtifactId",ConfigureTrrackOptions:"ConfigureTrrackOptions",CurrentChangeHandler:"CurrentChangeHandler",CurrentChangeHandlerConfig:"CurrentChangeHandlerConfig",FlavoredId:"FlavoredId",Label:"Label",LabelGenerator:"LabelGenerator",Metadata:"Metadata",MetadataId:"MetadataId",NodeArtifact:"NodeArtifact",NodeId:"NodeId",Nodes:"Nodes",ProduceWrappedStateChangeFunction:"ProduceWrappedStateChangeFunction",ProvenanceGraphStore:"ProvenanceGraphStore",ProvenanceNode:"ProvenanceNode",RecordActionArgs:"RecordActionArgs",RootNode:"RootNode",SideEffects:"SideEffects",StateChangeFunction:"StateChangeFunction",StateLike:"StateLike",StateNode:"StateNode",Trigger:"Trigger",TrrackActionConfig:"TrrackActionConfig",TrrackActionFunction:"TrrackActionFunction",TrrackActionRecord:"TrrackActionRecord",UnsubscribeCurrentChangeListener:"UnsubscribeCurrentChangeListener"}}]}]},{kind:"Folder",name:"docs",route:"/docs",children:[{kind:"Meta",data:{tutorial:"Tutorial"}},{kind:"Folder",name:"tutorial",route:"/docs/tutorial",children:[{kind:"Meta",data:{"getting-started":"Getting Started",usage:"Usage",basic:"Examples",advanced:"Advanced"}},{kind:"Folder",name:"advanced",route:"/docs/tutorial/advanced",children:[{kind:"Meta",data:{"current-change":"Current Change Event"}},{kind:"MdxPage",name:"current-change",route:"/docs/tutorial/advanced/current-change"}]},{kind:"Folder",name:"basic",route:"/docs/tutorial/basic",children:[{kind:"Meta",data:{state:"Counter Example"}},{kind:"MdxPage",name:"state",route:"/docs/tutorial/basic/state"}]},{kind:"MdxPage",name:"getting-started",route:"/docs/tutorial/getting-started"},{kind:"MdxPage",name:"usage",route:"/docs/tutorial/usage"}]},{kind:"MdxPage",name:"tutorial",route:"/docs/tutorial"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"showcase",route:"/showcase"}],flexsearch:{codeblocks:!0},title:"Current Change Event",headings:c},pageNextRoute:"/docs/tutorial/advanced/current-change",nextraLayout:a.ZP,themeConfig:i.Z};n.default=(0,t.j)(d)},7243:function(e){e.exports={"highlight-logo":"index_highlight-logo__tkwgy",file:"index_file__Rm6gb",active:"index_active__ztTy1",comparison:"index_comparison__QqYCf",optimization:"index_optimization__H9vSV",cta:"index_cta__d4aLZ"}},3021:function(){}},function(e){e.O(0,[3441,9774,2888,179],function(){return e(e.s=487)}),_N_E=e.O()}]);